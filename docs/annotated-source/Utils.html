<!DOCTYPE html>

<html>
<head>
  <title>Utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="OSG.html">
                OSG.js
              </a>
            
              
              <a class="source" href="BlendColor.html">
                BlendColor.js
              </a>
            
              
              <a class="source" href="BlendFunc.html">
                BlendFunc.js
              </a>
            
              
              <a class="source" href="BoundingBox.html">
                BoundingBox.js
              </a>
            
              
              <a class="source" href="BoundingSphere.html">
                BoundingSphere.js
              </a>
            
              
              <a class="source" href="BufferArray.html">
                BufferArray.js
              </a>
            
              
              <a class="source" href="Camera.html">
                Camera.js
              </a>
            
              
              <a class="source" href="ComputeMatrixFromNodePath.html">
                ComputeMatrixFromNodePath.js
              </a>
            
              
              <a class="source" href="CullFace.html">
                CullFace.js
              </a>
            
              
              <a class="source" href="CullSettings.html">
                CullSettings.js
              </a>
            
              
              <a class="source" href="CullStack.html">
                CullStack.js
              </a>
            
              
              <a class="source" href="CullVisitor.html">
                CullVisitor.js
              </a>
            
              
              <a class="source" href="Depth.html">
                Depth.js
              </a>
            
              
              <a class="source" href="DrawArrayLengths.html">
                DrawArrayLengths.js
              </a>
            
              
              <a class="source" href="DrawArrays.html">
                DrawArrays.js
              </a>
            
              
              <a class="source" href="DrawElements.html">
                DrawElements.js
              </a>
            
              
              <a class="source" href="EllipsoidModel.html">
                EllipsoidModel.js
              </a>
            
              
              <a class="source" href="FrameBufferObject.html">
                FrameBufferObject.js
              </a>
            
              
              <a class="source" href="FrameStamp.html">
                FrameStamp.js
              </a>
            
              
              <a class="source" href="Geometry.html">
                Geometry.js
              </a>
            
              
              <a class="source" href="Image.html">
                Image.js
              </a>
            
              
              <a class="source" href="KdTree.html">
                KdTree.js
              </a>
            
              
              <a class="source" href="KdTreeBuilder.html">
                KdTreeBuilder.js
              </a>
            
              
              <a class="source" href="Light.html">
                Light.js
              </a>
            
              
              <a class="source" href="LightSource.html">
                LightSource.js
              </a>
            
              
              <a class="source" href="LineWidth.html">
                LineWidth.js
              </a>
            
              
              <a class="source" href="Material.html">
                Material.js
              </a>
            
              
              <a class="source" href="Math.html">
                Math.js
              </a>
            
              
              <a class="source" href="Matrix.html">
                Matrix.js
              </a>
            
              
              <a class="source" href="MatrixTransform.html">
                MatrixTransform.js
              </a>
            
              
              <a class="source" href="Node.html">
                Node.js
              </a>
            
              
              <a class="source" href="NodeVisitor.html">
                NodeVisitor.js
              </a>
            
              
              <a class="source" href="Notify.html">
                Notify.js
              </a>
            
              
              <a class="source" href="Object.html">
                Object.js
              </a>
            
              
              <a class="source" href="PrimitiveSet.html">
                PrimitiveSet.js
              </a>
            
              
              <a class="source" href="Program.html">
                Program.js
              </a>
            
              
              <a class="source" href="Projection.html">
                Projection.js
              </a>
            
              
              <a class="source" href="Quat.html">
                Quat.js
              </a>
            
              
              <a class="source" href="RenderBin.html">
                RenderBin.js
              </a>
            
              
              <a class="source" href="RenderStage.html">
                RenderStage.js
              </a>
            
              
              <a class="source" href="Shader.html">
                Shader.js
              </a>
            
              
              <a class="source" href="ShaderGenerator.html">
                ShaderGenerator.js
              </a>
            
              
              <a class="source" href="Shape.html">
                Shape.js
              </a>
            
              
              <a class="source" href="Stack.html">
                Stack.js
              </a>
            
              
              <a class="source" href="State.html">
                State.js
              </a>
            
              
              <a class="source" href="StateAttribute.html">
                StateAttribute.js
              </a>
            
              
              <a class="source" href="StateGraph.html">
                StateGraph.js
              </a>
            
              
              <a class="source" href="StateSet.html">
                StateSet.js
              </a>
            
              
              <a class="source" href="Texture.html">
                Texture.js
              </a>
            
              
              <a class="source" href="TextureCubeMap.html">
                TextureCubeMap.js
              </a>
            
              
              <a class="source" href="Transform.html">
                Transform.js
              </a>
            
              
              <a class="source" href="TransformEnums.html">
                TransformEnums.js
              </a>
            
              
              <a class="source" href="TriangleIndexFunctor.html">
                TriangleIndexFunctor.js
              </a>
            
              
              <a class="source" href="Uniform.html">
                Uniform.js
              </a>
            
              
              <a class="source" href="UpdateVisitor.html">
                UpdateVisitor.js
              </a>
            
              
              <a class="source" href="Utils.html">
                Utils.js
              </a>
            
              
              <a class="source" href="Vec2.html">
                Vec2.js
              </a>
            
              
              <a class="source" href="Vec3.html">
                Vec3.js
              </a>
            
              
              <a class="source" href="Vec4.html">
                Vec4.js
              </a>
            
              
              <a class="source" href="Viewport.html">
                Viewport.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="Animation.html">
                Animation.js
              </a>
            
              
              <a class="source" href="AnimationUpdateCallback.html">
                AnimationUpdateCallback.js
              </a>
            
              
              <a class="source" href="BasicAnimationManager.html">
                BasicAnimationManager.js
              </a>
            
              
              <a class="source" href="Channel.html">
                Channel.js
              </a>
            
              
              <a class="source" href="Easing.html">
                Easing.js
              </a>
            
              
              <a class="source" href="FloatLerpChannel.html">
                FloatLerpChannel.js
              </a>
            
              
              <a class="source" href="FloatTarget.html">
                FloatTarget.js
              </a>
            
              
              <a class="source" href="Interpolator.html">
                Interpolator.js
              </a>
            
              
              <a class="source" href="Keyframe.html">
                Keyframe.js
              </a>
            
              
              <a class="source" href="LinkVisitor.html">
                LinkVisitor.js
              </a>
            
              
              <a class="source" href="QuatLerpChannel.html">
                QuatLerpChannel.js
              </a>
            
              
              <a class="source" href="QuatSlerpChannel.html">
                QuatSlerpChannel.js
              </a>
            
              
              <a class="source" href="QuatTarget.html">
                QuatTarget.js
              </a>
            
              
              <a class="source" href="Sampler.html">
                Sampler.js
              </a>
            
              
              <a class="source" href="StackedQuaternion.html">
                StackedQuaternion.js
              </a>
            
              
              <a class="source" href="StackedRotateAxis.html">
                StackedRotateAxis.js
              </a>
            
              
              <a class="source" href="StackedTranslate.html">
                StackedTranslate.js
              </a>
            
              
              <a class="source" href="Target.html">
                Target.js
              </a>
            
              
              <a class="source" href="UpdateMatrixTransform.html">
                UpdateMatrixTransform.js
              </a>
            
              
              <a class="source" href="Vec3LerpChannel.html">
                Vec3LerpChannel.js
              </a>
            
              
              <a class="source" href="Vec3Target.html">
                Vec3Target.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="Input.html">
                Input.js
              </a>
            
              
              <a class="source" href="Options.html">
                Options.js
              </a>
            
              
              <a class="source" href="ReaderParser.html">
                ReaderParser.js
              </a>
            
              
              <a class="source" href="osgDB.html">
                osgDB.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulator.html">
                FirstPersonManipulator.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorMouseKeyboardController.html">
                FirstPersonManipulatorMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorOculusController.html">
                FirstPersonManipulatorOculusController.js
              </a>
            
              
              <a class="source" href="Manipulator.html">
                Manipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulator.html">
                OrbitManipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorEnums.html">
                OrbitManipulatorEnums.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorGamePadController.html">
                OrbitManipulatorGamePadController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorHammerController.html">
                OrbitManipulatorHammerController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorLeapMotionController.html">
                OrbitManipulatorLeapMotionController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorMouseKeyboardController.html">
                OrbitManipulatorMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="SwitchManipulator.html">
                SwitchManipulator.js
              </a>
            
              
              <a class="source" href="osgGA.html">
                osgGA.js
              </a>
            
              
              <a class="source" href="osgNameSpace.html">
                osgNameSpace.js
              </a>
            
              
              <a class="source" href="Composer.html">
                Composer.js
              </a>
            
              
              <a class="source" href="IntersectVisitor.html">
                IntersectVisitor.js
              </a>
            
              
              <a class="source" href="ParameterVisitor.html">
                ParameterVisitor.js
              </a>
            
              
              <a class="source" href="TriangleIntersect.html">
                TriangleIntersect.js
              </a>
            
              
              <a class="source" href="osgPool.html">
                osgPool.js
              </a>
            
              
              <a class="source" href="osgUtil.html">
                osgUtil.js
              </a>
            
              
              <a class="source" href="View.html">
                View.js
              </a>
            
              
              <a class="source" href="Viewer.html">
                Viewer.js
              </a>
            
              
              <a class="source" href="EventProxy.html">
                EventProxy.js
              </a>
            
              
              <a class="source" href="GamePad.html">
                GamePad.js
              </a>
            
              
              <a class="source" href="Hammer.html">
                Hammer.js
              </a>
            
              
              <a class="source" href="LeapMotion.html">
                LeapMotion.js
              </a>
            
              
              <a class="source" href="Oculus.html">
                Oculus.js
              </a>
            
              
              <a class="source" href="StandardMouseKeyboard.html">
                StandardMouseKeyboard.js
              </a>
            
              
              <a class="source" href="osgViewer.html">
                osgViewer.js
              </a>
            
              
              <a class="source" href="stats.html">
                stats.js
              </a>
            
              
              <a class="source" href="webgl-debug.html">
                webgl-debug.js
              </a>
            
              
              <a class="source" href="webgl-utils.html">
                webgl-utils.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="Hammer.html">
                Hammer.js
              </a>
            
              
              <a class="source" href="Leap.html">
                Leap.js
              </a>
            
              
              <a class="source" href="Q.html">
                Q.js
              </a>
            
              
              <a class="source" href="vr.html">
                vr.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>Utils.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>define( [
    <span class="hljs-string">'osgUtil/osgPool'</span>,
    <span class="hljs-string">'osg/StateGraph'</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( osgPool, StateGraph )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>make the warning about StateGraph desappear</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">Object</span>.keys( StateGraph );

    <span class="hljs-keyword">var</span> Utils = {};

    Utils.init = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> StateGraphClass = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/StateGraph'</span> );
        osgPool.memoryPools.stateGraph = <span class="hljs-keyword">new</span> osgPool.OsgObjectMemoryPool( StateGraphClass ).grow( <span class="hljs-number">50</span> );
    };

    <span class="hljs-keyword">var</span> toString = <span class="hljs-built_in">Object</span>.prototype.toString;
    Utils.isArray = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( obj )</span> {</span>
        <span class="hljs-keyword">return</span> toString.call( obj ) === <span class="hljs-string">'[object Array]'</span>;
    };

    Utils.extend = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Save a reference to some core methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> toString = <span class="hljs-built_in">Object</span>.prototype.toString,
            hasOwnPropertyFunc = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;

        <span class="hljs-keyword">var</span> isFunction = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( obj )</span> {</span>
            <span class="hljs-keyword">return</span> toString.call( obj ) === <span class="hljs-string">'[object Function]'</span>;
        };
        <span class="hljs-keyword">var</span> isArray = Utils.isArray;
        <span class="hljs-keyword">var</span> isPlainObject = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( obj )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Must be an Object.
Because of IE, we also have to check the presence of the constructor property.
Make sure that DOM nodes and window objects don’t pass through, as well</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> ( !obj || toString.call( obj ) !== <span class="hljs-string">'[object Object]'</span> || obj.nodeType || obj.setInterval ) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Not own constructor property must be Object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> ( obj.constructor &amp;&amp; !hasOwnPropertyFunc.call( obj, <span class="hljs-string">'constructor'</span> ) &amp;&amp; !hasOwnPropertyFunc.call( obj.constructor.prototype, <span class="hljs-string">'isPrototypeOf'</span> ) ) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Own properties are enumerated firstly, so to speed up,
if last one is own, then all properties are own.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            <span class="hljs-keyword">var</span> key;
            <span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> obj ) {}

            <span class="hljs-keyword">return</span> key === <span class="hljs-literal">undefined</span> || hasOwnPropertyFunc.call( obj, key );
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>copy reference to target object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> target = <span class="hljs-built_in">arguments</span>[ <span class="hljs-number">0</span> ] || {}, i = <span class="hljs-number">1</span>,
            length = <span class="hljs-built_in">arguments</span>.length,
            deep = <span class="hljs-literal">false</span>,
            options, name, src, copy;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Handle a deep copy situation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> target === <span class="hljs-string">'boolean'</span> ) {
            deep = target;
            target = <span class="hljs-built_in">arguments</span>[ <span class="hljs-number">1</span> ] || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>skip the boolean and the target</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            i = <span class="hljs-number">2</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Handle case when target is a string or something (possible in deep copy)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> target !== <span class="hljs-string">'object'</span> &amp;&amp; !isFunction( target ) ) {
            target = {};
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>extend jQuery itself if only one argument is passed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( length === i ) {
            target = <span class="hljs-keyword">this</span>;
            --i;
        }

        <span class="hljs-keyword">for</span> ( ; i &lt; length; i++ ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Only deal with non-null/undefined values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> ( ( options = <span class="hljs-built_in">arguments</span>[ i ] ) !== <span class="hljs-literal">null</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Extend the base object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> options ) {
                    src = target[ name ];
                    copy = options[ name ];</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Prevent never-ending loop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">if</span> ( target === copy ) {
                        <span class="hljs-keyword">continue</span>;
                    }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Recurse if we’re merging object literal values or arrays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">if</span> ( deep &amp;&amp; copy &amp;&amp; ( isPlainObject( copy ) || isArray( copy ) ) ) {
                        <span class="hljs-keyword">var</span> clone = src &amp;&amp; ( isPlainObject( src ) || isArray( src ) ) ? src : isArray( copy ) ? [] : {};</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Never move original objects, clone them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        target[ name ] = Utils.extend( deep, clone, copy );</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Don’t bring in undefined values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( copy !== <span class="hljs-literal">undefined</span> ) {
                        target[ name ] = copy;
                    }
                }
            }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Return the modified object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> target;
    };

    Utils.objectInehrit = Utils.objectInherit = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( base <span class="hljs-comment">/*, extras*/</span> )</span> {</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">F</span><span class="hljs-params">()</span> {</span>}
        F.prototype = base;
        <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span> F();</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>let augment object with multiple arguement</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++ ) {
            Utils.objectMix( obj, <span class="hljs-built_in">arguments</span>[ i ], <span class="hljs-literal">false</span> );
        }
        <span class="hljs-keyword">return</span> obj;
    };
    Utils.objectMix = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( obj, properties, test )</span> {</span>
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> properties ) {
            <span class="hljs-keyword">if</span> ( !( test &amp;&amp; obj[ key ] ) ) {
                obj[ key ] = properties[ key ];
            }
        }
        <span class="hljs-keyword">return</span> obj;
    };

    Utils.objectType = {};
    Utils.objectType.type = <span class="hljs-number">0</span>;
    Utils.objectType.generate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( arg )</span> {</span>
        <span class="hljs-keyword">var</span> t = Utils.objectType.type;
        Utils.objectType[ t ] = arg;
        Utils.objectType[ arg ] = t;
        Utils.objectType.type += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> t;
    };

    Utils.objectLibraryClass = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( object, libName, className )</span> {</span>
        object.className = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> className;
        };
        object.libraryName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> libName;
        };
        <span class="hljs-keyword">var</span> libraryClassName = libName + <span class="hljs-string">'::'</span> + className;
        object.libraryClassName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> libraryClassName;
        };

        <span class="hljs-keyword">return</span> object;
    };
    Utils.setTypeID = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( classObject )</span> {</span>
        <span class="hljs-keyword">var</span> className = classObject.prototype.className();
        <span class="hljs-keyword">var</span> typeID = Utils.objectType.generate( className );
        classObject.typeID = classObject.prototype.typeID = typeID;
    };

    Utils.Float32Array = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Float32Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Float32Array</span> : <span class="hljs-literal">null</span>;
    Utils.Int32Array = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Int32Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Int32Array</span> : <span class="hljs-literal">null</span>;
    Utils.Uint16Array = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Uint16Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Uint16Array</span> : <span class="hljs-literal">null</span>;
    Utils.Uint32Array = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Uint32Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Uint32Array</span> : <span class="hljs-literal">null</span>;

    Utils.performance = {};
    Utils.performance.now = ( <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>if no window.performance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( window.performance === <span class="hljs-literal">undefined</span> ) {
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.now();
            };
        }

        <span class="hljs-keyword">var</span> fn = window.performance.now || window.performance.mozNow || window.performance.msNow || window.performance.oNow || window.performance.webkitNow ||
                <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Date</span>.now();
            };
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> fn.apply( window.performance, <span class="hljs-built_in">arguments</span> );
        };
    } )();

    <span class="hljs-keyword">return</span> Utils;
} );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
